<html>
   <head>
      <meta charset="utf-8">
      <title>GDG Cataguases | api-meetup-flash-briefing-alexa</title>
      <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>   
   </head>
   <body onload="load()">
      <script>
	 function load() {
	    $.getJSON('https://cors-anywhere.herokuapp.com/https://www.meetup.com/Teste-API/events/json/')
		.done(function(result) {

		    var results = []

		    result.forEach(function(item) {

		        var alexaObject = createJsonObject(item);
		        var request = alexaObject.redirectionUrl;
		        results.push(alexaObject);
		    })

		    console.log(JSON.stringify(results));
		    document.write(JSON.stringify(results));

		})
		.fail(function(jqxhr, textStatus, error) {
		    var err = textStatus + ", " + error;
		    console.log("Request Failed: " + err);
		});

	}


	function createJsonObject(item) {

	    var alexaObject = {
		"uid": getUID(),
		"updateDate": item.local_time,
		"titleText": item.title.replace(/<[^>]*>?/gm, ''),
		"mainText": item.descr.replace(/<[^>]*>?/gm, ''),
		"redirectionUrl": item.event_url
	    }

	    return alexaObject;

	}


	function getUID() {
	    return 0001
	}
         
      </script>
   </body>
</html>
